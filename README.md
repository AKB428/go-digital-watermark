# go-digital-watermark 

## Golangã§ç”»åƒã«å¯¾ã—ã¦é›»å­é€ã‹ã—ã‚’å®Ÿè¡Œã™ã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒæ¤œè¨¼ã‚³ãƒ¼ãƒ‰ã§ã™


## steganography (ã‚¹ãƒ†ã‚¬ãƒã‚°ãƒ©ãƒ•ã‚£ãƒ¼)

æŒ‡å®šã•ã‚ŒãŸPNGãƒ•ã‚¡ã‚¤ãƒ«ã®RGBå€¤ã‚’å¤‰æ›´ã—ã€æŒ‡å®šã•ã‚ŒãŸæ–‡å­—åˆ—ã®ãƒã‚¤ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’åŸ‹ã‚è¾¼ã¿ã¾ã™ã€‚
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ x,yåº§æ¨™ã®å…ˆé ­ã‹ã‚‰y=0ã‚’å›ºå®šã§1è¡Œç›®ã‚’æ›¸ãæ›ãˆã¾ã™ã€‚
ãŸã¨ãˆã° ABCã§ã‚ã‚Œã° 1,0ã®åº§æ¨™ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãæ›ãˆã¾ã™ (1ãƒ”ã‚¯ã‚»ãƒ«ã¯RGBAã®4ãƒã‚¤ãƒˆã®ãŸã‚x=1ä»¥å†…)ã€‚
ã¾ãŸã€RGBAã®Aã¯ãƒ‡ãƒ¼ã‚¿åŸ‹ã‚è¾¼ã¿ã«ä½¿ç”¨ã—ãªã„ãŸã‚1åº§æ¨™ã«åŸ‹ã‚è¾¼ã‚ã‚‹ã®ã¯ï¼“ãƒã‚¤ãƒˆã«ãªã‚Šã¾ã™ã€‚
ã“ã®ãŸã‚xè»¸(æ¨ªã®é•·ã•[width])*3ãƒã‚¤ãƒˆã¾ã§ã®æ–‡å­—åˆ—ã‚’åŸ‹ã‚è¾¼ã‚€ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

ABC -> x,y=[1,0]ã‚’æ›¸ãæ›ãˆ (3byte)  (â€»åŠ ãˆã¦çµ‚ç«¯ã¨ã—ã¦[2,0]ã‚’[RGBA]=[0,0,0,255]ã§å¤‰æ›´ã€ä»¥ä¸‹ã‚‚åŒã˜)

ABCD -> x,y=[1,0][2,0]ã‚’æ›¸ãæ›ãˆ (4byte)

ABCDE -> x,y=[1,0][2,0]ã‚’æ›¸ãæ›ãˆ (5byte)

ABCDEFG -> x,y=[1,0][2,0][3,0]ã‚’æ›¸ãæ›ãˆ (7byte)


![stg-explanation](doc/stg-explanation.png "stg-explanation.png")


### å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ãƒ“ãƒ«ãƒ‰

```
go build -o ./bin/steganography steganography/steganography.go
```

### åŸ‹ã‚è¾¼ã¿

image/red.png ã«"ABCDE"æ–‡å­—åˆ—ã‚’åŸ‹ã‚è¾¼ã‚€

```
./bin/steganography  -f image/red.png -t ABCDE
```
```
ç”»åƒãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼špng
æ¨ªå¹…=800, ç¸¦å¹…=800
[65 66 67 68 69]
input text byte 5
Original Data
 [x,y=0]      R      G      B      A
       1    255      0      0    255
       2    255      0      0    255
       3    255      0      0    255
```

image/red.png ã«"ã‚ã„ã†æ¼¢å­—"æ–‡å­—åˆ—ã‚’åŸ‹ã‚è¾¼ã‚€

```
./bin/steganography -f image/red.png -t ã‚ã„ã†æ¼¢å­—
```

çµµæ–‡å­—ã‚‚åŸ‹ã‚è¾¼ã‚ã¾ã™

```
./bin/steganography -f image/blue300-200.png -t "ã‚ã„ã†ãˆãŠæ¼¢å­—-1ğŸ˜‹"
```

### ãƒ‡ã‚³ãƒ¼ãƒ‰

```
./bin/steganography -f sg.png -d
```

"ABCDE"ã‚’åŸ‹ã‚è¾¼ã‚“ã å ´åˆã®ä¾‹

```
ç”»åƒãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼špng
æ¨ªå¹…=800, ç¸¦å¹…=800
 [x,y=0]      R      G      B      A
       1     65     66     67    255
       2     68     69      0    255
       3      0      0      0    255
ABCDE
```

"ã‚ã„ã†ãˆãŠæ¼¢å­—-1ğŸ˜‹" ã‚’åŸ‹ã‚è¾¼ã‚“ã å ´åˆã®ä¾‹

```
ç”»åƒãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼špng
æ¨ªå¹…=300, ç¸¦å¹…=200
 [x,y=0]      R      G      B      A
       1    227    129    130    255
       2    227    129    132    255
       3    227    129    134    255
       4    227    129    136    255
       5    227    129    138    255
       6    230    188    162    255
       7    229    173    151    255
       8     45     49    240    255
       9    159    152    139    255
      10      0      0      0    255
ã‚ã„ã†ãˆãŠæ¼¢å­—-1ğŸ˜‹
```

### ã‚µãƒ³ãƒ—ãƒ«

#### å…ƒç”»åƒ1

![ç”»åƒã®èª¬æ˜](image/blue300-200.png "blue300-200.png")

#### å…ƒç”»åƒ1ã«"ã‚ã„ã†ãˆãŠæ¼¢å­—-1ğŸ˜‹"ã€€ã‚’åŸ‹ã‚è¾¼ã‚“ã ç”»åƒ

![ç”»åƒã®èª¬æ˜](image-embedded-sample/blue300-200-stg.png "blue300-200-stg.png")

#### å…ƒç”»åƒ2

![ç”»åƒã®èª¬æ˜](image/photo-hiziribashi.png "photo-hiziribashi.png")

#### å…ƒç”»åƒ2ã«"ã‚ã„ã†ãˆãŠæ¼¢å­—-3ğŸ˜·"ã€€ã‚’åŸ‹ã‚è¾¼ã‚“ã ç”»åƒ

![ç”»åƒã®èª¬æ˜](image-embedded-sample/photo-hiziribashi-sg.png "photo-hiziribashi-sg.png")